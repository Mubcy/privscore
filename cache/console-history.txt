.exit
iface.decodeFunctionResult("testingMode", raw2); // should print boolean
const raw2 = await ethers.provider.call({ to: addr, data: iface.encodeFunctionData("testingMode", []) });
iface.decodeFunctionResult("owner", raw); // should print the owner address
const raw = await ethers.provider.call({ to: addr, data: iface.encodeFunctionData("owner", []) });
const iface = new ethers.Interface(["function owner() view returns (address)", "function testingMode() view returns (bool)"]);
const addr = "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512"; // the deployed address
.exit
npx hardhat run --network localhost scripts/setTestingModeCli_env.js
$env:TOGGLE = "true"
$env:CONTRACT_ADDR = "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512"
.exit
iface.decodeFunctionResult("owner", raw)                    // should return owner address
const raw = await ethers.provider.call({ to: addr, data });
const data = iface.encodeFunctionData("owner", []);
const iface = new ethers.Interface(["function owner() view returns (address)"]);
(await ethers.provider.getCode(addr)).slice(0,40)           // expect something like '0x60806040...' not '0x'
const addr = "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512";   // <DEPLOYED_ADDR>
.exit
iface.decodeFunctionResult("owner", raw)                    // should return owner address
const raw = await ethers.provider.call({ to: addr, data });
const data = iface.encodeFunctionData("owner", []);
const iface = new ethers.Interface(["function owner() view returns (address)"]);
(await ethers.provider.getCode(addr)).slice(0,40)           // expect something like '0x60806040...' not '0x'
const addr = "0x5FbDB2315678afecb367f032d93F642f64180aa3";   // <DEPLOYED_ADDR>
.exit
iface.decodeFunctionResult("owner", raw)
const raw = await ethers.provider.call({ to: addr, data });
const data = iface.encodeFunctionData("owner", []);
const iface = new ethers.Interface(["function owner() view returns (address)"]);
(await ethers.provider.getCode(addr)).length
const addr = "<address you saved in deployments/local.json>";
# run inside hardhat console
.exit
(await ethers.provider.getCode(addr)).slice(0,40)   // should print a long runtime bytecode, not '0x'
const addr = "0x5FbDB2315678afecb367f032d93F642f64180aa3";
# then inside:
npx hardhat console --network localhost
.exit
node scripts/saveAddress.js
# should print: Saved to ...\deployments\local.json
node scripts/saveAddress.js
# run the save script so frontend helpers load the new address
$env:CONTRACT_ADDR = "0x5FbDB2315678afecb367f032d93F642f64180aa3"
# set a CONTRACT_ADDR environment variable in this shell (PowerShell)
.exit
iface.decodeFunctionResult("owner", raw)   // should return the owner's address
const raw = await ethers.provider.call({ to: addr, data });
const data = iface.encodeFunctionData("owner", []);
const iface = new ethers.Interface(["function owner() view returns (address)"]);
(await ethers.provider.getCode(addr)).slice(0,20)   // should print hex starting 0x60...
const addr = "0x5FbDB2315678afecb367f032d93F642f64180aa3";
# then inside console:
npx hardhat console --network localhost
# open npx hardhat console --network localhost 
.exit
await ethers.provider.call({ to: addr, data })  // should return bytes (not revert), else show 0x or decodeable result
const data = iface.encodeFunctionData("owner", []);
const iface = new ethers.Interface(["function owner() view returns (address)", "function getEncryptedPayload(address,uint256) view returns (bytes)"]);
(await ethers.provider.getCode(addr)).length   // expect > 2 or a long hex (not '0x')
const addr = "0x5FbDB2315678afecb367f032d93F642f64180aa3";
# inside the hardhat console paste:
npx hardhat console --network localhost
.exit
raw  // should be "0x" or hex bytes. If it reverts you'll see the revert.
const raw = await ethers.provider.call({ to: addr, data });
// raw call
const data = iface.encodeFunctionData("getEncryptedPayload", [user, modelId]);
const iface = new ethers.Interface(["function getEncryptedPayload(address user, uint256 modelId) view returns (bytes)"]);
// build a minimal iface for the getter
const modelId = 1;
const user = "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266";
const addr = "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512";       // your deployed PrivScore
// inside hardhat console
raw  // should be "0x" or hex bytes. If it reverts you'll see the revert.
const raw = await ethers.provider.call({ to: addr, data });
// raw call
const data = iface.encodeFunctionData("getEncryptedPayload", [user, modelId]);
const iface = new ethers.Interface(["function getEncryptedPayload(address user, uint256 modelId) view returns (bytes)"]);
// build a minimal iface for the getter
const modelId = 1;
const user = "0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266";
const addr = "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512";       // your deployed PrivScore
// inside hardhat console
raw
const raw = await ethers.provider.call({ to: addr, data: iface.encodeFunctionData("getEncryptedPayload",[ "0xf39F...","1" ]) });
const iface = new ethers.Interface(artifact.abi);
const artifact = await hre.artifacts.readArtifact("PrivScore");
const addr = "0xe7f1725E77..."; // your PrivScore
# in hardhat console
iface.decodeFunctionResult("testingMode", raw); // decodes boolean if raw non-empty
raw;   // raw hex or "0x"
const raw = await ethers.provider.call({ to: addr, data });
const data = iface.encodeFunctionData("testingMode", []);
const iface = new ethers.Interface(artifact.abi);
const artifact = await hre.artifacts.readArtifact("PrivScore");
await waitForReceipt(txHash, 20000, 500); // waits up to 20s
}
  return null;
  }
    await new Promise(res => setTimeout(res, interval));
    if (r) return r;
    const r = await ethers.provider.getTransactionReceipt(hash);
  while (Date.now() - start < timeout) {
  const start = Date.now();
await waitForReceipt(txHash, 20000, 500); // waits up to 20s
}
  return null;
  }
    await new Promise(res => setTimeout(res, interval));
    if (r) return r;
    const r = await ethers.provider.getTransactionReceipt(hash);
  while (Date.now() - start < timeout) {
  const start = Date.now();
async function waitForReceipt(hash, timeout = 10000, interval = 500) {
await ethers.provider.getTransactionReceipt(txHash); // shows receipt or null
await ethers.provider.getTransaction(txHash);        // shows tx or null
await ethers.provider.getTransactionReceipt(txHash); // shows receipt or null
const txHash = "0x48d59149ca601be25f21db00a777a3a121420fd1380dac230c59d77a7b815766";
const addr = "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512";
iface.decodeFunctionResult("testingMode", raw)
raw // you saw 0x...01
const raw = await ethers.provider.call({ to: addr, data: iface.encodeFunctionData("testingMode",[]) });
const iface = new ethers.Interface(artifact.abi);
const artifact = await hre.artifacts.readArtifact("PrivScore");
// inside hardhat console
await ethers.provider.getTransactionReceipt("0x48d59149ca601be25f21db00a777a3a121420fd1380dac230c59d77a7b815766")
# in hardhat console
receipt
tx
const receipt = await ethers.provider.getTransactionReceipt(tx.hash);
const tx = await ethers.provider.getTransaction("0x48d59149ca601be25f21db00a777a3a121420fd1380dac230c59d77a7b815766");
onchain.slice(0,200)  // prints first part of on-chain runtime bytecode
console.log("onchain length:", onchain.length, "compiled length:", compiled.length);
const compiled = artifact.deployedBytecode || artifact.bytecode; // try deployedBytecode first
const onchain = await ethers.provider.getCode(addr);
iface.decodeFunctionResult("testingMode", raw)
raw
const raw = await ethers.provider.call({ to: addr, data });
const data = iface.encodeFunctionData("testingMode", []);
const iface = new ethers.Interface(artifact.abi);
artifact.abi.find(x => x.name === "testingMode" || x.type === "function" && x.name === "testingMode")
const artifact = await hre.artifacts.readArtifact("PrivScore");
const addr = "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512";
iface.decodeFunctionResult("testingMode", raw)
raw
const raw = await ethers.provider.call({ to: addr, data });
const data = iface.encodeFunctionData("testingMode", []);
const iface = new ethers.Interface(artifact.abi);
artifact.abi.find(x => x.name === "testingMode" || x.type === "function" && x.name === "testingMode")
const artifact = await hre.artifacts.readArtifact("PrivScore");
const addr = "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512";
await ethers.provider.getCode("0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512")
await contract.testingMode(); // should return true
await contract.setTestingMode(true);
const contract = await ethers.getContractAt("PrivScore", addr, signer);
const [signer] = await ethers.getSigners();
const addr = "0xe7f1725E7734CE288F8367e1Bb143E90bb3F0512";
await ethers.provider.getCode("0x9fE46736679d2D9a65F0992F2272dE9f3c7fa6e0")